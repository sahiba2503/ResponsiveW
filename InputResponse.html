<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link    rel="stylesheet"  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-top: 75px;
      }
      .outside-box {
        border: 2px solid black;
        width: 400px;
        background-color: rgb(194, 236, 194);
      }
      h2 {
        font-size: 50px;
        text-align: center;
        margin-top: 100px;
      }
      button {
        width: 70px;
        height: 40px;
        font-size: 15px;
        margin-left: 150px;
        margin-top: 20px;
        background-color: rgb(248, 5, 5);
        color: white;
      }
      ol li {
        list-style-type: none;
        background-color: white;
        padding: 5px 25px;
      }
    </style>
  </head>

  <body>
    <div class="container">
    <h2>Editable List</h2>
    <input type="text" id="input" placeholder="Enter item...">
    <button id="addBtn">click</button>
    <ol id="list"></ol>
  </div>

    <script>
       const input = document.getElementById("input");
      const addBtn = document.getElementById("addBtn");     
      const list = document.getElementById("list"); 
     
         
       let editIndex = null;
       let storeData = [];
      

      addBtn.addEventListener("click", clickfun);      

      function clickfun() 
      {
           const text = input.value.trim();  

        if(text === '')//why not == operator.************
              {         
            return alert("please Enter something"); 
        }      
           if(editIndex !== null)
           {         
                  const liItems = document.querySelectorAll('#list li');
        liItems[editIndex].querySelector('.text').textContent = text;

        storeData.splice(editIndex,1,text);
        console.log(storeData);

        addBtn.textContent = 'click';
        editIndex = null;
      input.value = '';
      UpdateEvents(); 
                            
                 }       

         else {
             
         var li = document.createElement("li");
         li.className = "listitem";

          var spanText = document.createElement("span");
          spanText.textContent = text;
          spanText.className = 'text';

           var icons = document.createElement("div");
           icons.className = 'icons';

           icons.insertAdjacentHTML("afterbegin", '<span class=delete><i class="fa-solid fa-trash"></i></span>');
           icons.insertAdjacentHTML("afterbegin", '<span class=edit><i class="fa-regular fa-eye-slash"></i></i></span>');
            
           li.append(spanText,icons);
           list.appendChild(li);

           storeData.push(text);
          console.log(storeData);
          input.value = " ";
           UpdateEvents(); 
         }
           
         };  
    function UpdateEvents()
    {  
         const editBtns = document.querySelectorAll(".edit");
         const editLen = editBtns.length;
        const deleteBtns = document.querySelectorAll(".delete");
        const deletLen =  deleteBtns.length;
        const liItems = document.querySelectorAll("#ollist li");
      
       // ******************
             for( let i=0; i<editLen; i++)
             {
                 deleteBtns[i].addEventListener("click",deletefun);
                 function deletefunc()
                 {
                  if(liItems[i].queryselector("text").textContent == input.value) 
                   {            
                  editIndex == null;
                  }
                    liItems[i].remove(); 
                    storeData.splice(i,1);
                    console.log(storeData);
                  UpdateEvents();//after deleting li tage should be refresh deletebtns array.
                    };      
                 }
                                
               for( let j=0; j<deletLen; j++)
               {
        editBtns[j].addEventListener("click",editfun);
        function editfun(){               
               input.value = liItems[j].querySelector('.text').textContent;
                 editIndex = j;
               };
               }                
    };
    //how we can replace can from will from everywhere in this file.*************
     </script>
  </body>
</html>
