<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"  />
      <style>
        *{
          margin: 0;
          padding: 0;

        }
        body{
          
          display: flex;
          justify-content: center;
          margin-top: 200px;
        }
        button{
          width: 50px;
          background-color: red;
          color:white;
          height: 30px;
          text-align: center;
        }
        input{
          width: 300px;
          height: 30px;
        }
        ol li{
          list-style: none;
          display: flex;
          width: 100%;
          border:1px solid black;
          justify-content: space-between;
        }
        .edit{
          margin-right: 15px;
        }       
        </style>
              
</head>
  <body>
  <div class="container">
    <h2>Editable List</h2>
    <input type="text" id="inputText" placeholder="Enter item...">
    <button id="addBtn">click</button>

    <ol id="list"></ol>
  </div>

  <script>
    const input = document.getElementById('inputText');
    const addBtn = document.getElementById('addBtn');
    const list = document.getElementById('list');
    let editIndex = null;
    let storeData = [];  
    addBtn.addEventListener("click",clickfuntion);

    function clickfuntion()
    {
      const text = input.value.trim();
      if (text === ''){
         return alert('Please enter text');}
      
      if (editIndex !== null) {
        const liItems = document.querySelectorAll('#list li');
        liItems[editIndex].querySelector('.text').textContent = text;
        storeData.splice(editIndex,1,text);
        console.log(storeData);
        addBtn.textContent = 'click';
        editIndex = null;
      } 
      else {
        // Create a new li
        const li = document.createElement('li');

        const spanText = document.createElement('span');
        spanText.textContent = text;
        spanText.className = 'text';

        const icons = document.createElement('div');
        icons.className = 'icons';

     icons.insertAdjacentHTML("afterbegin", '<span class=delete ><i class="fa-solid fa-trash"></i></span>');
     icons.insertAdjacentHTML("afterbegin", '<span class=edit><i class="fa-regular fa-eye-slash"></i></i></span>');
            
           li.append(spanText,icons);
           list.appendChild(li);
           storeData.push(text);
           console.log(storeData);
      }
     
      input.value = '';
      updateEvents(); // Refresh edit and delete events each time
    };
    // ---------- FUNCTION: UPDATE EVENTS ----------
    function updateEvents() {
      const editBtns = document.querySelectorAll('.edit');
      const deleteBtns = document.querySelectorAll('.delete');
      const liItems = document.querySelectorAll('#list li');

      // ----- DELETE EVENT -----
      deleteBtns.forEach((btn, index) => {
      btn.onclick = function () {
      liItems[index].remove();

           if(liItems[index].querySelector(".text").textContent == input.value){
            input.value = " ";
            addBtn.textContent = 'click';
          }
         
           storeData.splice(index,1);
           console.log(storeData);        
          updateEvents(); // refresh after remove ,why not work without this function call.
        };
      });

      // ----- EDIT EVENT -----
      editBtns.forEach((btn, index) => {
        btn.onclick = function () {
          input.value = liItems[index].querySelector('.text').textContent;
          editIndex = index;
          addBtn.textContent = 'Update';
        };
      });
    }
    
  </script>
</body>
</html>





    



 
    

     

        
        
    
       
                    
                    
    
         
    
